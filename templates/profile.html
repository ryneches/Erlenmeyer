{% extends "layout.html" %}
{% block body %}

<style type="text/css">
    #mid { position:absolute; top:50%; }
</style>

{% if authenticated %}
    <h1>Welcome to your profile page, {{ user.realname }}!</h1>
{% else %}
    <h1>This is the profile page for {{ user.realname }}</h1>
{% endif %}

<!-- avatar with avatar change modal -->
<div id="avatarModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<form action='/newavatar' method='post' enctype="multipart/form-data">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3 id="myModalLabel">Upload a new avatar picture!</h3>
    </div>
    <div class="modal-body">
       <input type="file" name="avatar" />
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal">Close</button>
        <input type="submit" class="btn btn-primary" value="Save changes"></input>
    </div>
</form>
</div>

<a data-toggle="modal" href="#avatarModal">
<img class="img-circle" src="{{ url_for('static', filename=user.thumb)}}">
</a>

{% if authenticated %}
<!-- sample registration modal -->
<div id="regModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<form action='/publish' method='post' enctype="multipart/form-data">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3 id="myModalLabel">Register a sample!</h3>
    </div>
    <div class="modal-body">
    <form class="well form-search" action="/publish" method="post" enctype="multipart/form-data">
    <input type="text" class="input-medium" placeholder="Headline" name="headline" size="15"></input>
    <input type="text" class="input-medium" placeholder="Article" name="body" size="140"></input><br /><br />
    <input type="text" class="input-medium" placeholder="Latitude" name="lat" size="140"></input>
    <input type="text" class="input-medium" placeholder="Longitude" name="lng" size="140"></input>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal">Close</button>
        <input type="submit" class="btn btn-primary" value="Save changes"></input>
    </div>
</form>
</div>

<a data-toggle="modal" class="btn-large btn-success" href='#regModal'>Register a new sample</a>

{% endif %}

<p/>
<table class="table table-bordered table-striped table-hover"><body>
<thead>
<strong>
<tr style="font-weight:bold"><td>Title</td><td>Date</td><td>Status</td></tr>
</strong>
</thead>
<tbody>
{% for r in articles %}
    <tr>
    <td style="padding-top:3.5em;">{{ r.headline }}</td>
    <td style="padding-top:3.5em;">{{ r.date }}</td>
    <td style="padding-top:3.5em;">{% if r.active %}Published{% else %}Not Published{% endif %}</td>
    </tr>
{% endfor %}
</tbody></table>

{% endblock %}
